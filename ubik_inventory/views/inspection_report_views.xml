<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ======================= Main Inspection Report Form View ======================= -->
    <record id="view_inspection_report_form" model="ir.ui.view">
        <field name="name">inspection.report.form</field>
        <field name="model">inspection.report</field>
        <field name="arch" type="xml">
            <form string="Inspection Report">
                <header>
                    <button name="action_start_inspection" string="Start Inspection" type="object" class="btn-primary" invisible="state != 'draft'"/>
                    <button name="action_inspection_completed" type="object" string="Complete Inspection" class="btn-secondary" invisible="state == 'done'"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,in_progress,done"/>
                </header>

                <sheet>
                    <group>
                        <field name="name" readonly="1"/>
                        <field name="picking_id" options="{'no_create': True}"/>
                        <field name="date"/>
                        <field name="inspector_id"/>
                    </group>

                    <notebook >
                        <page string="Inspection Lines">
                            <field name="inspection_line_ids">
                                <list string="Inspection Lines" editable="bottom">
                                    <field name="product_id"/>
                                  
                                    <field name="quantity" readonly="1"/>
                                    <field name="sample_quantity" readonly="is_sample_locked"/>
                                    <field name="balance_quantity" readonly="1"/>
                                    <button name="action_open_line_report" string="Report" type="object" class="btn-secondary" icon="fa-file-text-o"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- ======================= Inspection Report Tree View ======================= -->
    <record id="view_inspection_report_tree" model="ir.ui.view">
        <field name="name">inspection.report.tree</field>
        <field name="model">inspection.report</field>
        <field name="arch" type="xml">
            <list string="Inspection Reports">
                <field name="name"/>
                <field name="picking_id"/>
                <field name="date"/>
                <field name="inspector_id"/>
                <field name="state" widget="badge" decoration-success="state == 'done'" decoration-info="state =='in_progress'" decoration-danger="state == 'draft'"/> 
            </list>
        </field>
    </record>

    <!-- ======================= Inspection Report Lines Detailed Report View ======================= -->
    <record id="view_inspection_report_line_form_detailed" model="ir.ui.view">
        <field name="name">inspection.report.line.form.detailed</field>
        <field name="model">inspection.report.line</field>
        <field name="arch" type="xml">
            <form string="Inspection Line Details">
                <sheet>
                    <group>
                        <field name="name" readonly="1"/>
                        <field name="product_id" readonly="1"/>
                        <!-- <field name="quantity" readonly="1"/>
                        <field name="sample_quantity" readonly="is_sample_locked"/>
                        <field name="balance_quantity" readonly="1"/> -->
                        <field name="inspection_release_no"/>
                        <field name="inspection_date" readonly="1"/>
                        <field name="batch_no"/>
                        <field name="standard_batch"/>
                        <field name="manf_date"/>
                        <field name="exp_date"/>
                        <field name="mrp"/>
                        <field name="product_sent"/>
                    </group>

                    <group string="Packing Inspection">
                        <field name="tube"/>
                        <field name="tube_remarks"/>
                        <field name="box"/>
                        <field name="box_remarks"/>
                        <field name="action_taken_packing"/>
                    </group>

                    <group>
                        <group string="Color">
                            <field name="color"/>
                            <field name="color_standard"/>
                            <field name="no_reason_color"/>
                            <field name="action_taken_color"/>
                        </group>

                        <group string="Consistency">
                            <field name="consistency_standard"/>
                            <field name="no_reason_consistency"/>
                            <field name="action_taken_consistency"/>
                        </group>
                    </group>

                    <group>
                        <group string="Perfume">
                            <field name="perfume_standard"/>
                            <field name="no_reason_perfume"/>
                            <field name="action_taken_perfume"/>
                        </group>

                        <group string="Spreadability">
                            <field name="spreadability_standard"/>
                            <field name="no_reason_spreadability"/>
                            <field name="action_taken_spreadability"/>
                        </group>
                    </group>

                    <group string="Remarks and Attachments">
                        <field name="client_coa" widget="many2many_binary"/>
                        <field name="remarks"/>
                        <field name="conclusion"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_inspection_report_line_tree_custom" model="ir.ui.view">
        <field name="name">inspection.report.line.tree.custom</field>
        <field name="model">inspection.report.line</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="inspection_date"/>
                <field name="product_id"/>
                <field name="inspection_release_no"/>
                <!-- <field name="quantity"/>
                <field name="sample_quantity"/>
                <field name="balance_quantity"/> -->
                <field name="batch_no"/>
                <field name="standard_batch"/>
                <field name="manf_date"/>
                <field name="exp_date"/>
                <!-- <field name="mrp"/>
                <field name="conclusion"/> -->
            </list>
        </field>
    </record>



    <!-- ======================= Action & Menu ======================= -->
    <record id="action_quality_inspection_report" model="ir.actions.act_window">
        <field name="name">Inspection Reports</field>
        <field name="res_model">inspection.report</field>
        <field name="view_mode">list,form</field>
    </record>

    
    <menuitem id="menu_quality_control_root" name="Quality Control" parent="stock.menu_stock_root" sequence="10"/>

    <menuitem id="menu_quality_inspection_report" name="Inspection Reports" parent="menu_quality_control_root" action="action_quality_inspection_report" sequence="10"/>

</odoo>
